# 系统管理 API

## 1. 健康检查

### 接口信息

- **路径**: `/api/health/`
- **方法**: `GET`
- **认证**: 不需要
- **描述**: 检查系统健康状态

### 请求示例

```bash
curl http://localhost:8000/api/health/
```

### 响应示例

```json
{
  "status": "ok",
  "database": "connected",
  "system_initialized": false
}
```

### 响应字段

| 字段 | 类型 | 说明 |
|------|------|------|
| status | string | 系统状态，固定返回 "ok" |
| database | string | 数据库连接状态："connected" 或 "disconnected" |
| system_initialized | boolean | 系统是否已初始化 |

---

## 2. 验证 Bootstrap Key

### 接口信息

- **路径**: `/api/admin/bootstrap/verify`
- **方法**: `POST`
- **认证**: 不需要
- **描述**: 验证系统初始化密钥（仅未初始化时可用）

### 请求参数

```json
{
  "bootstrap_key": "生成的随机密钥"
}
```

### 响应示例

**成功：**
```json
{
  "valid": true,
  "message": "密钥验证成功"
}
```

**失败：**
```json
{
  "valid": false,
  "error": "密钥无效"
}
```

### 状态码

- `200` - 验证成功
- `400` - 密钥无效
- `410` - 系统已初始化，接口失效

---

## 3. 初始化系统

### 接口信息

- **路径**: `/api/admin/bootstrap/initialize`
- **方法**: `POST`
- **认证**: 需要 bootstrap_key
- **描述**: 创建管理员账户并完成系统初始化

### 请求参数

```json
{
  "bootstrap_key": "生成的随机密钥",
  "admin_username": "admin",
  "admin_password": "secure_password",
  "allow_register": false
}
```

### 响应示例

```json
{
  "message": "系统初始化成功",
  "admin_created": true
}
```

### 注意事项

- bootstrap_key 在系统启动时生成，输出到日志
- 初始化完成后，bootstrap_key 失效
- 初始化完成后，此接口返回 410 Gone
- 不能重复初始化

### 状态码

- `200` - 初始化成功
- `400` - 密钥无效或参数错误
- `410` - 系统已初始化，接口失效
